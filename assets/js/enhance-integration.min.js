(c=>{var e={init:function(){this.bindEvents(),this.checkInitialState()},bindEvents:function(){c("#wu-enhance-load-data").on("click",this.loadWebsites.bind(this))},checkInitialState:function(){c("#wu_enhance_website_id").val()&&c("#wu_enhance_website_id").prop("disabled",!1)},loadWebsites:function(e){e.preventDefault();var a=this,n=c("#wu-enhance-load-data"),t=c("#wu-enhance-loader-status"),e=c("#wu_enhance_api_token").val(),i=c("#wu_enhance_api_url").val(),s=c("#wu_enhance_org_id").val();e&&i&&s?(n.prop("disabled",!0),t.text(wu_enhance_data.i18n.loading_websites).css("color",""),c.post(wu_enhance_data.ajax_url,{action:"wu_enhance_get_websites",nonce:wu_enhance_data.nonce,api_token:e,api_url:i,org_id:s}).done(function(e){e.success&&e.data.websites?(a.populateWebsites(e.data.websites),c("#wu_enhance_website_id").prop("disabled",!1),t.text(wu_enhance_data.i18n.websites_loaded).css("color","green"),1===e.data.websites.length&&c("#wu_enhance_website_id").val(e.data.websites[0].id)):t.text(e.data.message||wu_enhance_data.i18n.websites_failed).css("color","red")}).fail(function(){t.text(wu_enhance_data.i18n.request_failed).css("color","red")}).always(function(){n.prop("disabled",!1)})):t.text(wu_enhance_data.i18n.enter_credentials).css("color","red")},populateWebsites:function(e){var n=c("#wu_enhance_website_id");n.empty().append('<option value="">'+wu_enhance_data.i18n.select_website+"</option>"),c.each(e,function(e,a){n.append('<option value="'+a.id+'">'+a.name+"</option>")})}};c(document).ready(function(){c("#wu-enhance-load-data").length&&e.init()})})(jQuery);