(t=>{function e(){var s={min_strength:4,enforce_rules:!1,min_length:12,require_uppercase:!1,require_lowercase:!1,require_number:!1,require_special:!1};return"undefined"==typeof wu_password_strength_settings?s:t.extend(s,wu_password_strength_settings)}window.WU_PasswordStrength=function(s){this.settings=e(),this.options=t.extend({pass1:null,pass2:null,result:null,submit:null,minStrength:parseInt(e().min_strength,10)||4,onValidityChange:null},s),this.isPasswordValid=!1,this.failedRules=[],this.init()},WU_PasswordStrength.prototype={init(){let s=this;this.options.pass1&&this.options.pass1.length&&(this.options.result&&this.options.result.length||(this.options.result=t("#pass-strength-result"),this.options.result.length))&&(this.options.result.html(this.getStrengthLabel("empty")),this.options.pass1.on("keyup input",function(){s.checkStrength()}),this.options.pass2&&this.options.pass2.length&&this.options.pass2.on("keyup input",function(){s.checkStrength()}),this.options.submit&&this.options.submit.length&&this.options.submit.prop("disabled",!0),this.checkStrength())},checkStrength(){var s,t=this.options.pass1.val(),e=this.options.pass2?this.options.pass2.val():"";this.options.result.attr("class","wu-py-2 wu-px-4 wu-block wu-text-sm wu-border-solid wu-border wu-mt-2"),t?(s=this.getDisallowedList(),t=wp.passwordStrength.meter(t,s,e),this.updateUI(t),this.updateValidity(t)):(this.options.result.addClass("wu-bg-gray-100 wu-border-gray-200").html(this.getStrengthLabel("empty")),this.setValid(!1))},getDisallowedList(){return"undefined"==typeof wp||void 0===wp.passwordStrength?[]:void 0===wp.passwordStrength.userInputDisallowedList?wp.passwordStrength.userInputBlacklist():wp.passwordStrength.userInputDisallowedList()},getStrengthLabel(s){var t;if("undefined"==typeof pwsL10n)return(t={empty:"Enter a password","-1":"Unknown",0:"Very weak",1:"Very weak",2:"Weak",3:"Medium",4:"Strong",super_strong:"Super Strong",5:"Mismatch"})[s]||t[0];switch(s){case"empty":return this.settings.i18n&&this.settings.i18n.empty?this.settings.i18n.empty:"Enter a password";case-1:return pwsL10n.unknown||"Unknown";case 0:case 1:return pwsL10n.short||"Very weak";case 2:return pwsL10n.bad||"Weak";case 3:return pwsL10n.good||"Medium";case 4:return pwsL10n.strong||"Strong";case"super_strong":return this.settings.i18n.super_strong;case 5:return pwsL10n.mismatch||"Mismatch";default:return pwsL10n.short||"Very weak"}},updateUI(s){let t=this.getStrengthLabel(s),e="";switch(s){case-1:case 0:case 1:case 2:e="wu-bg-red-200 wu-border-red-300";break;case 3:e="wu-bg-yellow-200 wu-border-yellow-300";break;case 4:e="wu-bg-green-200 wu-border-green-300";break;default:e="wu-bg-red-200 wu-border-red-300"}this.settings.enforce_rules&&s>=this.options.minStrength&&5!==s&&(s=this.options.pass1.val(),s=this.checkPasswordRules(s),t=s.valid?(e="wu-bg-green-300 wu-border-green-400",this.getStrengthLabel("super_strong")):(e="wu-bg-red-200 wu-border-red-300",this.getRulesHint(s.failedRules))),this.options.result.addClass(e).html(t)},getRulesHint(s){var t=[],e=this.settings.i18n;return-1!==s.indexOf("length")&&t.push(e.min_length.replace("%d",this.settings.min_length)),-1!==s.indexOf("uppercase")&&t.push(e.uppercase_letter),-1!==s.indexOf("lowercase")&&t.push(e.lowercase_letter),-1!==s.indexOf("number")&&t.push(e.number),-1!==s.indexOf("special")&&t.push(e.special_char),0===t.length?this.getStrengthLabel("super_strong"):e.required+" "+t.join(", ")},updateValidity(s){let t=!1;var e=this.options.pass1.val();(t=s>=this.options.minStrength&&5!==s?!0:t)&&this.settings.enforce_rules?(s=this.checkPasswordRules(e),t=s.valid,this.failedRules=s.failedRules):this.failedRules=[],this.setValid(t)},checkPasswordRules(s){var t=[],e=this.settings;return e.min_length&&s.length<e.min_length&&t.push("length"),e.require_uppercase&&!/[A-Z]/.test(s)&&t.push("uppercase"),e.require_lowercase&&!/[a-z]/.test(s)&&t.push("lowercase"),e.require_number&&!/[0-9]/.test(s)&&t.push("number"),e.require_special&&!/[!@#$%^&*()_+\-={};:'",.<>?~\[\]\/|`]/.test(s)&&t.push("special"),{valid:0===t.length,failedRules:t}},getFailedRules(){return this.failedRules},setValid(s){var t=this.isPasswordValid;this.isPasswordValid=s,this.options.submit&&this.options.submit.length&&this.options.submit.prop("disabled",!s),t!==s&&"function"==typeof this.options.onValidityChange&&this.options.onValidityChange(s)},isValid(){return this.isPasswordValid}}})(jQuery);